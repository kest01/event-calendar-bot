<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini App Calendar</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <header>
    <h2 id="title"></h2>
  </header>

  <div id="calendar"></div>

  <div id="add-event-popover" hidden>
    <button id="add-event-btn">Добавить событие</button>
  </div>

  <div id="event-modal" hidden class="modal">
    <div class="modal-overlay"></div>

    <div class="modal-content">
      <h3 class="modal-title">Новое событие</h3>

      <div class="form">
        <input id="event-id" type="text" hidden/>
        <label class="field">
          <span class="field-label">Название</span>
          <input id="event-title" type="text" />
        </label>

        <label class="field">
          <span class="field-label">Место проведения</span>
          <input id="event-place" type="text" />
        </label>

        <label class="field">
          <span class="field-label">Описание</span>
          <textarea id="event-description" rows="3"></textarea>
        </label>

        <div class="field">
          <span class="field-label">Дата и время</span>

          <div class="datetime-row">
            <input id="event-date" type="date" />

            <div class="time-input-wrapper">
              <input id="event-time" type="text" inputmode="numeric" maxlength="5" placeholder="__:__"/>
            </div>
          </div>
        </div>
        
        <label class="field">
          <span class="field-label">Ссылка на фото</span>
          <input id="event-photo" type="text" />
        </label>

      </div>

      <div class="modal-actions">
        <button class="btn " id="cancel-btn">Отмена</button>
        <button class="btn " id="save-btn">Сохранить</button>
      </div>
    </div>
  </div>

  <div id="event-details-modal" class="modal" hidden>
    <div class="modal-overlay"></div>

    <div class="modal-content">
      <button class="event-details-edit-btn" id="details-edit-btn" title="Редактировать" hidden>✏️</button>
      
      <h3 class="modal-title" id="details-title"></h3>
      <img id="details-photo" src="" hidden/>

      <div class="event-meta">
        <div class="meta-row">
          <span class="meta-label">Когда</span>
          <span class="meta-value" id="details-date"></span>
          <span class="meta-value" id="details-time"></span>
        </div>

        <div class="meta-row" id="details-place-block" hidden>
          <span class="meta-label">Где</span>
          <span class="meta-value" id="details-place"></span>
        </div>

        <div class="meta-row">
          <span class="meta-label">Описание</span>
          <span class="meta-value" id="details-description"></span>
        </div>
      </div>

      <!-- Участники: Возможно участвую -->
      <div class="participants-section" id="maybe-participants-section" hidden>
        <div class="participants-header">Возможно участвуют:</div>
        <div class="participants-avatars" id="maybe-participants-avatars"></div>
      </div>

      <!-- Участники: Точно участвую -->
      <div class="participants-section" id="sure-participants-section" hidden>
        <div class="participants-header">Точно участвуют:</div>
        <div class="participants-avatars" id="sure-participants-avatars"></div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="maybe-btn">
          Возможно участвую
        </button>

        <button class="btn btn-primary" id="sure-btn">
          Точно участвую!
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
