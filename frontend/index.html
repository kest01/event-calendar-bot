<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini App Calendar</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <header>
    <h2 id="title"></h2>
  </header>

  <div id="calendar"></div>

  <div id="add-event-popover" hidden>
    <button id="add-event-btn">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
  </div>

  <div id="event-modal" hidden class="modal">
    <div class="modal-overlay"></div>

    <div class="modal-content">
      <h3 class="modal-title">–ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ</h3>

      <div class="form">
        <input id="event-id" type="text" hidden/>
        <div class="field">
          <span class="field-label">–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</span>
          <div class="event-type-selector" id="event-type-selector">
            <button type="button" class="event-type-btn" data-value="–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞">üèÉ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
            <button type="button" class="event-type-btn" data-value="–í—Å—Ç—Ä–µ—á–∞">ü§ù –í—Å—Ç—Ä–µ—á–∞</button>
            <button type="button" class="event-type-btn" data-value="–ö–ª—É–±–Ω—ã–π —Å—Ç–∞—Ä—Ç">üèÅ –ö–ª—É–±–Ω—ã–π —Å—Ç–∞—Ä—Ç</button>
            <button type="button" class="event-type-btn" data-value="–ü—Ä–æ—á–µ–µ">üìå –ü—Ä–æ—á–µ–µ</button>
          </div>
          <input id="event-type" type="hidden" value="–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞" />
        </div>
        <label class="field">
          <span class="field-label">–ù–∞–∑–≤–∞–Ω–∏–µ</span>
          <input id="event-title" type="text" />
        </label>

        <label class="field">
          <span class="field-label">–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</span>
          <input id="event-place" type="text" />
        </label>

        <label class="field">
          <span class="field-label">–û–ø–∏—Å–∞–Ω–∏–µ</span>
          <textarea id="event-description" rows="3"></textarea>
        </label>

        <div class="field">
          <span class="field-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</span>

          <div class="datetime-row">
            <input id="event-date" type="date" />

            <div class="time-input-wrapper">
              <input id="event-time" type="text" inputmode="numeric" maxlength="5" placeholder="__:__"/>
            </div>
          </div>
        </div>
        
        <label class="field">
          <span class="field-label">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ</span>
          <input id="event-photo" type="text" />
        </label>

      </div>

      <div class="modal-actions">
        <button class="btn " id="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn " id="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div id="event-details-modal" class="modal" hidden>
    <div class="modal-overlay"></div>

    <div class="modal-content">
      <div class="event-details-header-buttons">
        <button class="event-details-edit-btn" id="details-edit-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" hidden>‚úèÔ∏è</button>
        <button class="event-details-close-btn" id="details-close-btn" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>
      
      <h3 class="modal-title" id="details-title"></h3>
      <img id="details-photo" src="" hidden/>

      <div class="event-meta">
        <div class="meta-row" id="details-type-block">
          <span class="meta-label">–¢–∏–ø</span>
          <span class="meta-value" id="details-type"></span>
        </div>
        <div class="meta-row">
          <span class="meta-label">–ö–æ–≥–¥–∞</span>
          <span class="meta-value" id="details-date"></span>
          <span class="meta-value" id="details-time"></span>
        </div>

        <div class="meta-row" id="details-place-block" hidden>
          <span class="meta-label">–ì–¥–µ</span>
          <span class="meta-value" id="details-place"></span>
        </div>

        <div class="meta-row">
          <span class="meta-label">–û–ø–∏—Å–∞–Ω–∏–µ</span>
          <span class="meta-value" id="details-description"></span>
        </div>
      </div>

      <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏: –í–æ–∑–º–æ–∂–Ω–æ —É—á–∞—Å—Ç–≤—É—é -->
      <div class="participants-section" id="maybe-participants-section" hidden>
        <div class="participants-header">–í–æ–∑–º–æ–∂–Ω–æ —É—á–∞—Å—Ç–≤—É—é—Ç:</div>
        <div class="participants-avatars" id="maybe-participants-avatars"></div>
      </div>

      <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏: –¢–æ—á–Ω–æ —É—á–∞—Å—Ç–≤—É—é -->
      <div class="participants-section" id="sure-participants-section" hidden>
        <div class="participants-header">–¢–æ—á–Ω–æ —É—á–∞—Å—Ç–≤—É—é—Ç:</div>
        <div class="participants-avatars" id="sure-participants-avatars"></div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="maybe-btn">
          –í–æ–∑–º–æ–∂–Ω–æ —É—á–∞—Å—Ç–≤—É—é
        </button>

        <button class="btn btn-primary" id="sure-btn">
          –¢–æ—á–Ω–æ —É—á–∞—Å—Ç–≤—É—é!
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
